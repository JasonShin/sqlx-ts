# Parameters in SQLs

> ⚠️ **FEATURE NOT READY**: I am still building this feature and cannot be used yet!

Parameters is a way to denote value replacements in a SQL query. Each database uses
different placeholder symbol:

| database   | placeholder symbol      | Example                                       |
|------------|-------------------------|-----------------------------------------------|
| MySQL      | `?`                     | ``` SELECT * FROM items WHERE points > ? ```  |
| PostgreSQL | `$1` `$2` `$3` ... `$n` | ``` SELECT * FROM items WHERE points > $1 ``` |

## Binary operations

If you have the follow MySQL query in typescript

```typescript
// example
const someQuery = sql`
SELECT *
FROM items
WHERE points > ?;
```

would generate

```typescript
export type SomeQueryParams = []

export interface ISomeQueryResult {
    id: string
    points: number
}

export interface ISomeQueryQuery {
    params: SomeQueryParams;
    result: ISomeQueryResult;
}
```

## IN list query

If you have the following MySQL query

```typescript
// example
const someQuery = sql`
SELECT *
FROM items
WHERE id IN (?);
```

would generate following typescript types

```typescript
export type SomeQueryParams = [Array<number>]

export interface ISomeQueryResult {
    id: string
    points: number
}

export interface ISomeQueryQuery {
    params: SomeQueryParams;
    result: ISomeQueryResult;
}
```

## Subqueries

Query params within subqueries are interpreted as well. If you have the following MySQL query

```typescript
const someQuery = sql`
SELECT id, points
FROM items
WHERE id IN (
    SELECT id FROM items
    WHERE
        points > ?
        AND id IN (SELECT id FROM items WHERE food_type = ?)
)
AND points < ?
`
```

would generate following type definitions

```typescript
export type SomeQueryParams = [number, string, number]

export interface ISomeQueryResult {
    id: string
    points: number
}

export interface ISomeQueryQuery {
    params: SomeQueryParams;
    result: ISomeQueryResult;
}
```

Note that `QueryParams` array respects the order of params present in the query above

## Insert query

#### MySQL

Query params within an insert statement can be converted into TypeScript types as well

```typescript
const someQuery = sql`
INSERT INTO items (id, food_type, time_takes_to_cook, table_id, points)
VALUES
    (?, ?, ?, ?, ?),
    (?, ?, ?, ?, ?);
`
```

would generate following

```typescript
export type SomeQueryParams = [
    [number, string, number, number, number],
    [number, string, number, number, number]
]

export interface ISomeQueryQuery {
    params: SomeQueryParams
    result: null
}
```

#### PostgreSQL

As query params of PostgresSQL uses the numbered paramters, it's meaningless to generate a nested array respresnetation of them.

If you have

```typescript
const somePostgresInputQuery = sql`
INSERT INTO items (id, food_type, time_takes_to_cook, table_id, points)
VALUES
($2, $1, 2, $3, 2),
($5, 'test', $4, $7, $6);
`
```

Above query will generate the following typings

```typescript
export type SomePostgresInputQueryParams = [string, number, number, number, number, number, number];

export interface ISomePostgresInputQueryResult {
    
};

export interface ISomePostgresInputQueryQuery {
    params: SomePostgresInputQueryParams;
    result: ISomePostgresInputQueryResult;
};
```